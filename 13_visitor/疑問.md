## メモ
- データの構造と処理を分離
- ファイルとディレクトリの構造の中を、訪問者が処理をもって渡り歩く
- print_lineをvisitorがもつバージョン

## 疑問
- 共有済み。visitをpythonで綺麗に実装するには？
  - isinstanceかメソッド名かえる
- selfを渡すと、self.なんとかでメソッドとか呼べるの？（自分自身の参照をもっている）
  - self渡すのって委譲的な名前ないのかなと思った
  - 上から書くとあんまりしないので、自分を渡すのって違和感が…
  - 後述（##
- compositeとの使い分け？（処理を誰が持つかによって嬉しさが違うことを理解できないかも）
- get_directory（Directory）…getterつくってしまった…もっといい実装方法はないか…（別にいい）
- ダブルディスパッチのところわからなかった

## self渡している話
- selfは自分自身の参照を渡しているのでOK
  - ちなみにclsでも多分渡せるけど、インスタンス化していないので状態を持っていない
  - なのでクラス名とかしかとれない
- 例えばdirectoryが構造を表して、中にfileがいて、fileが処理をする
  - 携帯の例だと、あるディレクトリのファイルはプラン判定、別のディレクトリは機種の判定、みたいな、処理は別々
  - ビジターは処理自体が同じようなとき。実装を外から渡す＝処理を変えやすい
  - だからビジター自体が渡される
  - Entry的なところにかくんだといやなときは、処理がごちゃついているとき（構造としてのEntryやDirectoryを分けたい時。構造と実装を分けたい）
    - Entryにいろいろ持つと影響が出やすい

## ダブルディスパッチ
- FileはVisitorのvisitを呼ぶ
  - visitの中にfileの実装がある。visitするだけだとどこで呼ばれても同じ値しか返さない
  - クラスごとの情報を渡してちょっとvisitorをかえたい
  - この情報を持っているのはfileなので、visitするときに自分(Directoryとかfile)を渡す、これを使ってvisitorは情報をとる
  - selfじゃなくてnameとかでも実は動くと思う

## ちなみに
- メモリの消費やばいので、最初に作っておくといい
- Open-Closed=修正の影響とか、テストとか、拡張とか。デザインパターンを使うそういう設計ができる